{
	"name": "test",
	"properties": {
		"activities": [
			{
				"name": "Copy data1",
				"type": "Copy",
				"dependsOn": [],
				"policy": {
					"timeout": "0.12:00:00",
					"retry": 0,
					"retryIntervalInSeconds": 30,
					"secureOutput": false,
					"secureInput": false
				},
				"userProperties": [],
				"typeProperties": {
					"source": {
						"type": "SqlServerSource",
						"sqlReaderQuery": "SELECT ac_Code,\n       ac_longname,\n       ac_attribute,\n       p_promonumber,\n       p_startdate,\n       p_stopdate,\n       DATEDIFF(wk,p_startdate,p_stopdate) AS datediff1,\n       p_buystartdatedef,\n       p_buystopdatedef,\n       DATEDIFF(wk,p_buystartdatedef,p_buystopdatedef) AS datediff2,\n       p.ph_rowid,\n       p.ph_longname,\n       pt_longname,\n       p_confirmed,\n       pisd_closed,\n       sku_longname,\n       sku_stockcode,\n       sku_profitcentre,\n       sku_attribute,\n       gltt_rowid,\n       gltt_longname,\n       pisd_rate,\n       pisd_quantity,\n       pisd_amount,\n       pisd_paidamount,\n       p_deleted,\n       gltt_attribute,\n       p_rowid AS promotionrowid,\n       NormalQTY as normal_qty\nFROM account\n  INNER JOIN promotion ON p_accountrowid = ac_rowid\n  INNER JOIN activity ON p_activityrowid = pt_rowid\n  INNER JOIN promoitemsku ON pis_promotionrowid = p_rowid\n  INNER JOIN sku ON pis_skurowid = sku_rowid\n  INNER JOIN producthierarchy c ON c.ph_skurowid = sku_rowid\n  INNER JOIN producthierarchy p\n          ON p.ph_visitleft > c.ph_visitleft\n         AND p.ph_visitright < c.ph_visitright\n  INNER JOIN promoitemskudetail ON pisd_promoitemskurowid = pis_rowid\n  INNER JOIN gltype ON gltt_rowid = pisd_typerowid\n  LEFT OUTER JOIN (SELECT distinct est_accountrowid,\n                          est_skurowid,\n                          gltt_rowid as est_gltt_rowid,\n                          p_rowid AS est_p_rowid,\n                          CONVERT (INT,ROUND(SUM((est_normal / CONVERT (FLOAT(2),7))*(DATEDIFF(d,IIF (p_buystartdatedef >= est_Date,p_buystartdatedef,Est_Date),IIF (p_buystopdatedef >= DATEADD(d,6,est_date),DATEADD(d,6,est_date),p_buystopdatedef)) +1)),0)) AS NormalQTY\n                   FROM promotion\n                     INNER JOIN promoitemsku ON pis_promotionrowid = p_rowid\n                     INNER JOIN promoitemskudetail ON pisd_promoitemskurowid = pis_rowid\n                     INNER JOIN estimate\n                             ON est_accountrowid = p_accountrowid\n                            AND est_skurowid = pis_skurowid\nINNER JOIN gltype on gltt_rowid = pisd_typerowid\n                   WHERE (est_date BETWEEN p_buystartdatedef AND p_buystopdatedef OR DATEADD(d,6,est_date) BETWEEN p_buystartdatedef AND p_buystopdatedef)\n                   GROUP BY est_accountrowid,\n                            est_skurowid,\n                            p_rowid,\n                            gltt_rowid) EST\n               ON est_accountrowid = ac_rowid\n              AND est_skurowid = sku_rowid\n              AND est_p_rowid = p_rowid and gltt_rowid=est.est_gltt_rowid\nWHERE c.ph_producthierarchyrowid = p.ph_rowid\nAND   p_deleted = 0\nAND   pis_deleted = 0\nAND   pisd_deleted = 0\nAND (CONVERT(DATETIME,p_startdate) >= CONVERT(DATETIME,DATEADD(MONTH, -42, getdate())));\"",
						"queryTimeout": "02:00:00",
						"partitionOption": "None"
					},
					"sink": {
						"type": "DelimitedTextSink",
						"storeSettings": {
							"type": "AzureBlobFSWriteSettings"
						},
						"formatSettings": {
							"type": "DelimitedTextWriteSettings",
							"quoteAllText": true,
							"fileExtension": ".txt"
						}
					},
					"enableStaging": false,
					"translator": {
						"type": "TabularTranslator",
						"typeConversion": true,
						"typeConversionSettings": {
							"allowDataTruncation": true,
							"treatBooleanAsNumber": false
						}
					}
				},
				"inputs": [
					{
						"referenceName": "sql_server_awswfqsgpw",
						"type": "DatasetReference"
					}
				],
				"outputs": [
					{
						"referenceName": "sql_server_sink",
						"type": "DatasetReference",
						"parameters": {
							"container": "pac",
							"path": "dev/sql_server/test/",
							"file": "J_Pac_Px_Master_Edw.csv"
						}
					}
				]
			}
		],
		"folder": {
			"name": "Miscellaneous Pipelines"
		},
		"annotations": []
	}
}